# FITTY HUB - Piattaforma Fitness & Nutrizione

## ðŸ“‹ Indice Documentazione

- **FITTY_HUB.MD** (questo file): Visione strategica, business model, architettura core
- **FITTY_GYM.MD**: Modulo fitness - entity, controller, form, template
- **FITTY_NUTRI.MD**: Modulo nutrizione - entity, controller, form, template

---

## Visione Generale

**FITTY HUB** Ã¨ una piattaforma che combina:
- ðŸ“± **App gratuita B2C** per utenti finali
- ðŸ’¼ **Piattaforma SaaS B2B** per professionisti (palestre, PT, nutrizionisti)

---

## ðŸš€ LA VERA FORZA DEL MODELLO

### ðŸ’Ž **VANTAGGIO COMPETITIVO PRINCIPALE**

> **"Cambi palestra? Cambi PT? Cambi nutrizionista? L'app resta la stessa. I tuoi dati restano con te."**

#### Il Problema delle App Tradizionali:
```
âŒ App della Palestra A
   â””â”€ Cambi palestra â†’ perdi tutto, app inutile

âŒ App del PT Mario
   â””â”€ Cambi PT â†’ perdi tutto, app inutile

âŒ 3 app diverse
   â”œâ”€ App palestra
   â”œâ”€ App PT
   â””â”€ App nutrizionista
   â””â”€ Confusione totale
```

#### La Soluzione FITTY HUB:
```
âœ… UN'UNICA APP PER SEMPRE
   â”œâ”€ Gennaio 2024: Palestra FitGym Roma
   â”œâ”€ Marzo 2024: Aggiungi PT Mario Rossi
   â”œâ”€ Giugno 2024: Cambi palestra â†’ PureGym Milano
   â”œâ”€ Agosto 2024: Aggiungi Nutrizionista Dott.ssa Bianchi
   â”œâ”€ Ottobre 2024: Lasci PT Mario, prendi PT Laura
   â””â”€ TUTTO nello stesso posto, storico completo conservato
```

---

## Modello di Business

### ðŸ“± **LIVELLO 1: App Gratuita per Utenti** (B2C)

**Chiunque puÃ² scaricare l'app e usarla GRATIS senza limiti:**

âœ… **Allenamento autonomo**
- Creare le proprie schede di allenamento
- Biblioteca esercizi
- Timer e rest timer
- Tracciare serie, ripetizioni, peso
- Storico allenamenti
- Statistiche e progressi

âœ… **Nutrizione autonoma**
- Creare piani alimentari
- Database alimenti
- Diario alimentare
- Conteggio calorie e macro
- Ricette e meal prep
- Progressi peso corporeo

âœ… **Tutto GRATIS, senza limitazioni**
- Nessun abbonamento richiesto
- Nessun vincolo
- Piena funzionalitÃ 

**Quando serve un professionista?**
- L'utente **PUÃ’ scegliere** di essere seguito da un PT
- L'utente **PUÃ’ scegliere** di essere seguito da un nutrizionista
- L'utente **PUÃ’ scegliere** di iscriversi in palestra
- Ma **NON Ã¨ obbligatorio** per usare l'app

---

### ðŸ’¼ **LIVELLO 2: Piattaforma SaaS per Professionisti** (B2B)

**Chi PAGA?** â†’ Solo i **professionisti** che vogliono gestire clienti

#### 1. **PALESTRA** (Organization - paga abbonamento SaaS)
Cosa ottiene:
- Dashboard gestione iscritti
- Sistema check-in/check-out presenze
- Gestione abbonamenti e pagamenti
- Gestione visite mediche
- **PuÃ² creare schede** per i propri iscritti (modulo FITTY_GYM)
- **PuÃ² offrire servizio nutrizione** (modulo FITTY_NUTRI opzionale)
- Analytics e statistiche

I suoi clienti iscritti:
- Usano l'app gratuitamente
- Vedono le schede create dalla palestra (se presenti)
- Possono comunque creare schede proprie
- Possono essere seguiti anche da PT esterni

#### 2. **PERSONAL TRAINER** (Organization - paga abbonamento SaaS)
Cosa ottiene:
- Dashboard gestione clienti
- Sistema inviti clienti
- Creazione schede personalizzate (modulo FITTY_GYM)
- Monitoraggio progressi clienti
- Chat/messaggistica con clienti

I suoi clienti:
- Usano l'app gratuitamente
- Vedono le schede create dal PT
- Possono essere iscritti a palestre (indipendente)
- Possono avere anche altri PT o nutrizionisti

#### 3. **NUTRIZIONISTA** (Organization - paga abbonamento SaaS)
Cosa ottiene:
- Dashboard gestione clienti
- Sistema inviti clienti
- Creazione piani alimentari (modulo FITTY_NUTRI)
- Monitoraggio diario alimentare clienti
- Chat/messaggistica con clienti

I suoi clienti:
- Usano l'app gratuitamente
- Vedono i piani alimentari creati dal nutrizionista
- Possono essere seguiti anche da PT (indipendente)
- Possono creare propri piani se vogliono

#### 4. **TEAM** (Organization - paga abbonamento bundle)
- Team di PT + Nutrizionisti
- Moduli FITTY_GYM + FITTY_NUTRI attivi
- Clienti condivisi
- Servizio completo fitness + nutrizione

---

## Scenari Pratici

### Scenario 1: Utente 100% autonomo (GRATIS)
```
Cliente: "Marco"
â”œâ”€ App installata
â”œâ”€ Crea le sue schede da solo
â”œâ”€ Crea il suo piano alimentare
â”œâ”€ Traccia tutto autonomamente
â””â”€ NON paga nulla, NON Ã¨ seguito da nessuno
```

### Scenario 2: Utente autonomo + decide di provare un PT
```
Cliente: "Laura"
â”œâ”€ App installata (usata gratis per 6 mesi)
â”œâ”€ Le sue schede fai-da-te (create da lei)
â”œâ”€ Decide di farsi seguire da PT "Mario Rossi"
â”‚  â””â”€ PT crea scheda professionale "Ipertrofia Avanzata"
â””â”€ App mostra:
   â”œâ”€ Schede "fai-da-te" di Laura (puÃ² tenerle)
   â””â”€ Scheda "professionale" del PT Mario (nuova)
```

### Scenario 3: Utente si iscrive in palestra
```
Cliente: "Giovanni"
â”œâ”€ App installata (gratis)
â”œâ”€ Si iscrive a palestra "FitGym Roma"
â”‚  â”œâ”€ Abbonamento: â‚¬50/mese (paga alla palestra, NON all'app)
â”‚  â”œâ”€ Palestra gli crea scheda "Base Sala Pesi"
â”‚  â””â”€ Check-in presenze quando va in palestra
â””â”€ App mostra:
   â”œâ”€ Scheda "Base" (della palestra)
   â””â”€ PuÃ² comunque creare schede sue
```

### Scenario 4: Iscritto palestra + PT esterno + sue schede
```
Cliente: "Sofia"
â”œâ”€ App installata (gratis)
â”œâ”€ Palestra "FitGym Roma"
â”‚  â””â”€ Scheda: "Tonificazione" (creata dalla palestra)
â”œâ”€ PT esterno "Mario Rossi"
â”‚  â””â”€ Scheda: "HIIT Avanzato" (creata dal PT)
â”œâ”€ Sue schede personali
â”‚  â””â”€ Scheda: "Yoga Mattutino" (creata da lei)
â””â”€ App mostra tutte e 3 le schede
```

### Scenario 5: Team completo (PT + Nutrizionista)
```
Cliente: "Andrea"
â”œâ”€ App installata (gratis)
â”œâ”€ Seguito da: Team "Body Studio"
â”‚  â”œâ”€ PT "Luca"
â”‚  â”‚  â””â”€ Scheda: "Forza 4x/week"
â”‚  â””â”€ Nutrizionista "Dott.ssa Bianchi"
â”‚     â””â”€ Piano: "Dieta 2000kcal"
â””â”€ App mostra:
   â”œâ”€ Scheda allenamento professionale
   â”œâ”€ Piano nutrizionale professionale
   â””â”€ PuÃ² comunque tracciare pasti extra
```

### Scenario 6: Solo nutrizionista
```
Cliente: "Francesca"
â”œâ”€ App installata (gratis)
â”œâ”€ Crea schede allenamento da sola (gratis)
â”œâ”€ Seguita da: Nutrizionista "Dott.ssa Verdi"
â”‚  â””â”€ Piano: "Ricomposizione Corporea"
â””â”€ App mostra:
   â”œâ”€ Schede allenamento sue
   â””â”€ Piano nutrizionale professionale
```

---

## Architettura Database

### Approccio: **Relazioni Normali (semplice)**

**Semplice e chiaro:**
- Ogni entity ha relazioni normali
- Nessun filtro globale complicato
- Query dirette con Doctrine

### ðŸŽ¯ Principi Fondamentali

1. **User (Cliente)**: PuÃ² esistere senza organizzazione (utente free)
2. **Organization**: Palestra/PT/Nutrizionista che paga l'abbonamento SaaS
3. **Content (Schede/Piani)**: PuÃ² essere creato da user (gratis) o organization (professionale)

### Logica Chiave

```
Contenuto creato da utente:
â”œâ”€ organization_id = NULL
â”œâ”€ createdBy_id = user_id
â””â”€ planType = "user_created"

Contenuto creato da professionista:
â”œâ”€ organization_id = organization che l'ha creato
â”œâ”€ createdBy_id = staff_user_id
â””â”€ planType = "professional"
```

### Query Esempio

```php
// PT Mario vuole vedere i suoi clienti
$myClients = $clientOrganizationRelationRepository->findBy([
    'organization' => $currentOrganization,
    'status' => 'active'
]);

// Super Admin vuole vedere tutte le palestre
$allGyms = $organizationRepository->findBy([
    'type' => 'gym',
    'subscriptionStatus' => 'active'
]);

// Cliente Marco vuole vedere le sue schede
$myPlans = $workoutPlanRepository->findBy(['client' => $user]);
// Vede schede da TUTTE le organization + le sue personali
```

---

## Entity Core Condivise

### User (Cliente finale)
```php
- id (uuid)
- email (unique)
- password (hashed)
- firstName
- lastName
- dateOfBirth
- gender (male, female, other)
- phoneNumber
- address, city, postalCode
- profileImage (path)
- createdAt
- updatedAt

Relazioni:
- organizationRelations (OneToMany â†’ ClientOrganizationRelation)
- workoutPlans (OneToMany â†’ WorkoutPlan)
- nutritionPlans (OneToMany â†’ NutritionPlan)
```

**Nota:** Tutti gli utenti sono sempre FREE. Non pagano mai.

---

### Organization (Organizzazione B2B)
```php
- id (uuid)
- name (es. "FitGym Roma", "PT Mario Rossi")
- type (gym, personal_trainer, nutritionist, team)
- slug (univoco, per URL/sottodominio)
- description
- logo (path)
- address, city, postalCode
- phoneNumber
- email (billing)
- website
- vatNumber

// Moduli attivi
- modules (json: ['gym', 'nutri'])

// Abbonamento SaaS
- subscriptionPlan (starter, professional, enterprise)
- subscriptionStatus (trial, active, suspended, cancelled)
- subscriptionStartDate
- subscriptionEndDate
- maxClients (limite per piano)
- currentClientsCount (counter)

// Pagamento
- billingEmail
- paymentMethod
- lastPaymentDate
- nextPaymentDate

// Settings
- settings (json)
- isActive
- createdAt
- updatedAt

Relazioni:
- staff (OneToMany â†’ OrganizationUser)
- clientRelations (OneToMany â†’ ClientOrganizationRelation)
- workoutPlans (OneToMany â†’ WorkoutPlan)
- nutritionPlans (OneToMany â†’ NutritionPlan)
```

**Chi Ã¨ un Organization:**
- Una palestra che paga â‚¬49-199/mese
- Un PT che paga â‚¬29-149/mese
- Un nutrizionista che paga â‚¬29-149/mese
- Un team PT+Nutri che paga bundle

---

### OrganizationUser (Staff del Organization)
```php
- id (uuid)
- organization_id (ManyToOne â†’ Organization)
- user_id (ManyToOne â†’ User)
- role (owner, admin, trainer, nutritionist, staff)
- specialization
- certifications (json array)
- biography (text)
- hourlyRate (per consulenze)
- isActive
- hiredAt
- terminatedAt
- createdAt
- updatedAt
```

**Chi Ã¨ un OrganizationUser:**
- Il proprietario della palestra (owner)
- Un admin della palestra
- Un PT che lavora per la palestra
- Un nutrizionista del team

**Nota:** Un PT freelance Ã¨ un Organization (type=personal_trainer), non un OrganizationUser.

---

### ClientOrganizationRelation (Collegamento Cliente-Professionista)
```php
- id (uuid)
- organization_id (ManyToOne â†’ Organization)
- client_id (ManyToOne â†’ User)
- relationType (gym_member, pt_client, nutritionist_client)
- status (pending, active, suspended, terminated)
- assignedStaff_id (ManyToOne â†’ OrganizationUser, nullable)
- startDate
- endDate (nullable)
- notes (text)
- createdAt
- updatedAt
```

**Esempi:**
```
Cliente "Marco" + Palestra "FitGym":
- relationType: gym_member
- status: active
- GymMembership collegato (abbonamento, check-in, etc.)

Cliente "Laura" + PT "Mario Rossi":
- relationType: pt_client
- status: active
- PT puÃ² crearle schede

Cliente "Sofia" + Nutrizionista "Dott.ssa Bianchi":
- relationType: nutritionist_client
- status: active
- Nutrizionista puÃ² crearle piani
```

---

## Moduli

La piattaforma Ã¨ divisa in moduli acquistabili separatamente:

### Modulo FITTY_GYM (dettagli in FITTY_GYM.MD)
- Schede allenamento
- Esercizi
- Tracciamento allenamenti
- Gestione palestre (abbonamenti, check-in, visite mediche)

### Modulo FITTY_NUTRI (dettagli in FITTY_NUTRI.MD)
- Piani nutrizionali
- Pasti e ricette
- Diario alimentare
- Database alimenti

---

## Monetizzazione

### Per Utenti (B2C)
**GRATIS** âœ… sempre

Possibili upgrade futuri (opzionali):
- Cloud backup avanzato
- Video tutorial premium
- Analisi AI personalizzate

### Per Professionisti (B2B)

**Palestre:**
| Piano | Prezzo | Clienti | Features |
|-------|--------|---------|----------|
| Starter | â‚¬49/mese | 50 | Modulo GYM base |
| Professional | â‚¬99/mese | 200 | GYM + NUTRI |
| Enterprise | â‚¬199/mese | Illimitati | Tutto + API |

**PT/Nutrizionisti:**
| Piano | Prezzo | Clienti | Features |
|-------|--------|---------|----------|
| Solo | â‚¬29/mese | 20 | 1 professionista |
| Team | â‚¬79/mese | 100 | 3-5 professionisti |
| Studio | â‚¬149/mese | Illimitati | 10+ professionisti |

---

## Vantaggi Competitivi

### Per Utenti Finali

âœ… **ProprietÃ  dei dati**: I tuoi dati sono TUOI, non della palestra
âœ… **ContinuitÃ **: Cambi palestra ma mantieni tutto lo storico
âœ… **FlessibilitÃ **: Oggi palestra, domani PT, dopodomani entrambi
âœ… **Zero lock-in**: Non sei vincolato a nessun professionista
âœ… **Multi-servizio**: Un'app per allenamento + nutrizione + progressi
âœ… **Gratuita**: Funziona anche senza professionisti
âœ… **Storico completo**: Anni di allenamenti e progressi sempre disponibili

#### Esempio Reale:
```
Marco, 28 anni - Timeline 2023-2025:
â”œâ”€ 2023: Si allena da solo (150 allenamenti tracciati)
â”œâ”€ Gen 2024: Palestra FitGym (+ scheda palestra)
â”œâ”€ Apr 2024: Trasloco â†’ PureGym Milano
â”‚  â””â”€ â­ Storico 150 allenamenti ancora visibile
â”œâ”€ Lug 2024: Aggiunge PT Mario Rossi
â”‚  â””â”€ â­ Mantiene palestra + storico completo
â”œâ”€ Ott 2024: Lascia PT, continua solo palestra
â”‚  â””â”€ â­ Scheda PT consultabile in archivio
â””â”€ 2025: Torna ad allenarsi da solo
   â””â”€ â­ 2 anni di dati, puÃ² riutilizzare vecchie schede
```

### Per Professionisti

âœ… **Acquisizione facilitata**: Clienti giÃ  nell'ecosistema
âœ… **Nessuna barriera**: Cliente non deve scaricare "la tua app"
âœ… **ProfessionalitÃ **: Dashboard dedicata e strumenti pro
âœ… **Retention**: Cliente vede valore anche se cambia (puÃ² tornare)
âœ… **Network effect**: PiÃ¹ clienti = piÃ¹ visibilitÃ  marketplace
âœ… **Focus sul servizio**: Non devi creare/gestire un'app

### Per il Business

âœ… **ViralitÃ  organica**: Utenti portano altri utenti (gratis)
âœ… **Conversion naturale**: Free users â†’ clienti prof â†’ prof paganti
âœ… **Lock-in positivo**: PiÃ¹ dati = piÃ¹ valore = piÃ¹ retention
âœ… **Network effect**: PiÃ¹ prof â†’ piÃ¹ clienti â†’ piÃ¹ prof
âœ… **ScalabilitÃ **: Un'app, migliaia di tenant
âœ… **Revenue ricorrente**: B2B subscriptions prevedibili
âœ… **Low churn**: Professionisti non migrano (clienti nell'ecosistema)

---

## ðŸ”¥ Use Cases Killer

### 1. "Il Nomade Digitale"
```
Freelancer che viaggia:
â”œâ”€ Gen: Palestra Milano
â”œâ”€ Mar: Palestra Barcellona
â”œâ”€ Giu: Palestra Bali
â”œâ”€ Set: Torna Milano
â””â”€ âœ… Stessa app, stesso storico
```

### 2. "Lo Studente"
```
â”œâ”€ Estate: Palestra cittÃ  natale
â”œâ”€ Anno: Palestra cittÃ  universitÃ 
â”œâ”€ Esami: PT online
â””â”€ âœ… Non perde mai il filo
```

### 3. "Il Professionista Busy"
```
â”œâ”€ Palestra vicino ufficio
â”œâ”€ PT online (viaggi lavoro)
â”œâ”€ Nutrizionista dieta
â”œâ”€ Cambia cittÃ 
â””â”€ âœ… Tutto lo segue
```

### 4. "Il Fedele Convertito"
```
â”œâ”€ Palestra storica chiude (COVID)
â”œâ”€ Con app tradizionale: perde TUTTO
â”œâ”€ Con FITTY HUB: 3 anni di progressi salvi
â””â”€ âœ… Nuova palestra, continua seamless
```

---

## ðŸ’° Revenue Model

### Effetto Network (Viral Loop):
```
1. Utente scarica app gratis â†’ usa per mesi
2. Utente si fidelizza (dati accumulati = lock-in positivo)
3. Utente cerca palestra â†’ cerca su FITTY HUB marketplace
4. Palestra si iscrive a FITTY HUB per essere trovata
5. Palestra invita i suoi clienti â†’ piÃ¹ utenti gratis
6. Ciclo si ripete
```

### KPI Target:
```
Utenti:
- Retention 12 mesi: >70%
- DAU/MAU: >40%
- Lifetime: infinito

Professionisti (Organization):
- Churn annuale: <5%
- CAC: basso
- LTV: â‚¬1000-5000 (24-36 mesi)
```

---

## Roadmap

### Fase 1: MVP App Gratuita (3-4 mesi)
1. Autenticazione utenti
2. Modulo GYM base user (schede fai-da-te)
3. Modulo NUTRI base user (piani fai-da-te)
4. PWA mobile responsive

### Fase 2: Piattaforma B2B PT (2-3 mesi)
1. Organization management
2. Dashboard PT
3. Sistema inviti clienti
4. Schede professionali

### Fase 3: Piattaforma B2B Palestre (2-3 mesi)
1. Dashboard palestre
2. Gestione abbonamenti
3. Check-in/check-out
4. Visite mediche

### Fase 4: Piattaforma B2B Nutrizionisti (2 mesi)
1. Dashboard nutrizionisti
2. Piani alimentari professionali
3. Monitoraggio diario clienti

### Fase 5: Growth & Scale (ongoing)
1. Marketplace professionisti
2. Pagamenti integrati (Stripe)
3. Analytics avanzate
4. App mobile nativa
5. AI coaching

---

## Tecnologie

**Backend:**
- Symfony 7.3 (PHP 8.2+)
- Doctrine ORM (relazioni normali con filter)
- API Platform (REST API)
- Symfony Messenger (queue)

**Frontend:**
- Twig + Stimulus (dashboard web)
- PWA (Vue.js/React) per app mobile
- TailwindCSS

**Database:**
- PostgreSQL (organization_id per isolamento)
- Redis (cache, queue, sessions)

**Storage:**
- S3 / MinIO (immagini, file PDF visite mediche)

**Infrastruttura:**
- Docker / Docker Compose
- CI/CD (GitHub Actions)
- Hosting: AWS / DigitalOcean

---

## Security & Privacy

- **Isolamento dati**: Query filtrate per organization con Doctrine
- **Voters**: Controllo accessi granulare (Workout PlanVoter, ClientAccessVoter, etc.)
- **GDPR compliance**: Export dati utente, right to be forgotten
- **Encryption**: Dati sensibili (certificati medici) crittografati
- **Rate limiting**: Protezione API
- **CSRF protection**: Attivo su tutti i form

---

## Conclusione

FITTY HUB risolve il problema del **lock-in** delle app fitness tradizionali, dando agli utenti:
- **LibertÃ ** di cambiare professionisti senza perdere dati
- **ContinuitÃ ** multi-anno del proprio percorso fitness
- **FlessibilitÃ ** di combinare servizi multipli

Mentre i professionisti ottengono:
- **Strumento professionale** senza sviluppare un'app
- **Acquisizione clienti** facilitata (giÃ  nell'ecosistema)
- **Focus sul servizio** invece che sulla tecnologia

Ãˆ un **win-win-win** per utenti, professionisti e business.

---

**Prossimi passi:** Vedere FITTY_GYM.MD e FITTY_NUTRI.MD per dettagli implementativi.